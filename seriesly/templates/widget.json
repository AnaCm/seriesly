{% if callback %}{{ callback }}({% endif %}{"subscription": { {% if subscription.is_public %}"public": true,"key": "{{ subscription.public_id }}"{% else %}"public": false,"key": "{{ subscription.subkey }}"{% endif %}},"recently":[{% for episode in recently %}{"startdate": "{{ episode.date|date:"Y-m-d\TH:i:s" }}","since": "{{ episode.date|timesince }}","enddate": "{{ episode.date_end|date:"Y-m-d\TH:i:s" }}","network": "{{ episode.show.network }}","season": {{ episode.season_number }},"episode": {{ episode.number }},"name": "{{ episode.show.name|escapejs }}","title": "{{ episode.title|escapejs }}"}{% if not forloop.last %},{% endif %}{% endfor %}],"lastweek":[{% for episode in last_week reversed %}{"startdate": "{{ episode.date|date:"Y-m-d\TH:i:s" }}","since": "{{ episode.date|timesince }}","enddate": "{{ episode.date_end|date:"Y-m-d\TH:i:s" }}","network": "{{ episode.show.network }}","season": {{ episode.season_number }},"episode": {{ episode.number }},"name": "{{ episode.show.name|escapejs }}","title": "{{ episode.title|escapejs }}"}{% if not forloop.last %},{% endif %}{% endfor %}],"upcoming":[{% for episode in upcoming %}{"startdate": "{{ episode.date|date:"Y-m-d\TH:i:s" }}","since": "{{ episode.date|timeuntil }}","enddate": "{{ episode.date_end|date:"Y-m-d\TH:i:s" }}","network": "{{ episode.show.network }}","season": {{ episode.season_number }},"episode": {{ episode.number }},"name": "{{ episode.show.name|escapejs }}","title": "{{ episode.title|escapejs }}"}{% if not forloop.last %},{% endif %}{% endfor %}]}{% if callback %});{% endif %}